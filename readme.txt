В данном проекте мы использовали подход, c получением эмбеддингов с помощью TD-IDF.

Сначала мы предобработали данные с помощью Osmconvert и Osmfilter.

Osmconvert преобразует данные формат .pbf в .o5m и делает обрезку имеющихся данных до области, близкой к Москве.
Osmfilter применяется для того, чтобы оставить только объекты (nodes, weights, relations), у которых имеется какая-либо информация об адресе.

Дальнейшая обработка идет в Python с использованием Osmium и Pandas. Загружается .o5m файл и создаётся pandas таблица с характеристиками зданий. Далее в результате экспериментов было выяснено, что возможно восстановить ответ только если есть тэги street и housenumber, оставляем только такие: 253680 адресов.

Далее были проведены эксперименты по нахождению правильного адреса по запросу. Сначала применялся поиск с расстоянием Левенштейна между запросом и каждым из объектов, однако этот поиск был долгим (около 10 секунд на каждый запрос), а также неустойчивым к разным ошибкам в запросе. Было сделано решение отказаться от такого подхода.

Второй подход, который мы применили, строит различные N-граммы из которых состоят адреса, и далее применяет TF-IDF Vectorizer. При применении входной запрос разбивается на данные n-граммы и считается эмбеддинг запроса усреднение эмбединга n-грам. Считается произведение данного эмбеддинга со всеми эмбеддингами улиц, и таким образом находится топ ближайших вариантов к данному запросу. Этот метод работает в среднем за 59.3 миллисекунд на запрос. 

Также мы создали тестовый датасет, добавь к имеющимся данным опечатки и перестановки букв, а также неполные запросы.

Конечный продукт представляет из себя бэкенд-решение, которое по запросу выдаёт словарь с городом, улицей и номером дома, а так же делает запрос к LLM, которая обрабатывает всю информацию, имеющуюся об объекте, и выдает краткое описание его.

Для запуска проекта необходимо выполнить две команды

uvicorn back.back_api:app --host 0.0.0.0 --port 8000

streamlit run front/app.py